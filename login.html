<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Account | Savi Dabba</title>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
        <link rel="stylesheet" href="style.css" />
        <style>
            /* Hide the register form by default */
            #register-form {
                display: none;
            }
            .auth-container {
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .toggle-link {
                color: var(--primary);
                text-decoration: none;
                cursor: pointer;
                font-weight: 600;
            }
            .toggle-link:hover {
                text-decoration: underline;
            }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-lg sticky-top">
            <div class="container">
                <a class="navbar-brand" href="index.html">SAVI <span>DABBA</span></a>
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarNav">
                    <span class="fa-solid fa-bars" style="color: white"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav align-items-center">
                        <li class="nav-item">
                            <a class="nav-link active" href="index.html">Home</a>
                        </li>

                        <li class="nav-item dropdown">
                            <a
                                class="nav-link dropdown-toggle"
                                href="#"
                                id="menuDropdown"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false">
                                Menu
                            </a>
                            <ul
                                class="dropdown-menu dropdown-menu-dark"
                                aria-labelledby="menuDropdown">
                                <li>
                                    <a class="dropdown-item" href="breakfast.html">Breakfast</a>
                                </li>
                                <li><a class="dropdown-item" href="lunch.html">Lunch</a></li>
                                <li><a class="dropdown-item" href="dinner.html">Dinner</a></li>
                                <li>
                                    <a class="dropdown-item" href="desserts.html">Desserts</a>
                                </li>
                                <li>
                                    <a class="dropdown-item" href="beverages.html">Beverages</a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">Our Story</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link" href="login.html">Login</a>
                        </li>

                        <li class="nav-item ms-lg-3 mt-3 mt-lg-0">
                            <a href="cart.html" class="btn-cart-nav">
                                <i class="fa-solid fa-bag-shopping me-2"></i>Cart
                                <span
                                    id="cartCount"
                                    class="badge bg-black text-white ms-1 rounded-pill"
                                    >0</span
                                >
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="container auth-container">
            <div class="glass-card p-5" style="max-width: 450px; width: 100%">
                <div id="login-form">
                    <div class="text-center mb-4">
                        <h2 class="fw-bold">
                            WELCOME <span style="color: var(--primary)">BACK</span>
                        </h2>
                        <p class="text-muted">Login to your Savi Dabba account.</p>
                    </div>
                    <form onsubmit="handleAuth(event, 'login')">
                        <div class="mb-3">
                            <label class="small text-muted mb-2">Email</label>
                            <input
                                type="email"
                                class="glass-select"
                                placeholder="Email"
                                required
                                style="background-image: none" />
                        </div>
                        <div class="mb-4">
                            <label class="small text-muted mb-2">Password</label>
                            <input
                                type="password"
                                class="glass-select"
                                placeholder="••••••••"
                                required
                                style="background-image: none" />
                        </div>
                        <button type="submit" class="btn-primary-custom py-3">Login</button>
                        <div class="text-center mt-4">
                            <small class="text-muted"
                                >New to Savi Dabba?
                                <span class="toggle-link" onclick="toggleAuth()"
                                    >Sign Up</span
                                ></small
                            >
                        </div>
                    </form>
                </div>

                <div id="register-form">
                    <div class="text-center mb-4">
                        <h2 class="fw-bold">
                            JOIN <span style="color: var(--primary)">SAVI DABBA</span>
                        </h2>
                        <p class="text-muted">Create an account to start ordering.</p>
                    </div>
                    <form onsubmit="handleAuth(event, 'register')">
                        <div class="mb-3">
                            <label class="small text-muted mb-2">Full Name</label>
                            <input
                                type="text"
                                class="glass-select"
                                placeholder="Full Name"
                                required
                                style="background-image: none" />
                        </div>
                        <div class="mb-3">
                            <label class="small text-muted mb-2">Email</label>
                            <input
                                type="email"
                                class="glass-select"
                                placeholder="Email"
                                required
                                style="background-image: none" />
                        </div>
                        <div class="mb-4">
                            <label class="small text-muted mb-2">Password</label>
                            <input
                                type="password"
                                class="glass-select"
                                placeholder="••••••••"
                                required
                                style="background-image: none" />
                        </div>
                        <button type="submit" class="btn-primary-custom py-3">
                            Create Account
                        </button>
                        <div class="text-center mt-4">
                            <small class="text-muted"
                                >Already have an account?
                                <span class="toggle-link" onclick="toggleAuth()">Login</span></small
                            >
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <script>
            // JS Function to toggle between forms
            function toggleAuth() {
                const login = document.getElementById("login-form");
                const register = document.getElementById("register-form");

                if (login.style.display === "none") {
                    login.style.display = "block";
                    register.style.display = "none";
                } else {
                    login.style.display = "none";
                    register.style.display = "block";
                }
            }

            // Cart counter initialization
            function updateBadge() {
                const cart = JSON.parse(localStorage.getItem("cart")) || [];
                const badge = document.getElementById("cartCount");
                if (badge) badge.innerText = cart.reduce((sum, item) => sum + (item.qty || 1), 0);
            }
            updateBadge();
        </script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

        <script src="cart.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
